!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.netio=t():e.netio=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>g});var r={};e.r(r),e.d(r,{ajax:()=>h,arrayBuffer:()=>C,blob:()=>m,get:()=>p,html:()=>f,json:()=>c,post:()=>k,xml:()=>u});let o=new Map,s=1;const n=class{constructor(e="Root"){this.eventName=`Event.${e}`}on(e,t){let r=`${Date.now()}-${s++}`;return o.has(e)||o.set(e,new Map),o.get(e).set(r,{callback:t,once:!1}),r}once(e,t){let r=`${Date.now()}-${s++}`;return o.has(e)||o.set(e,new Map),o.get(e).set(r,{callback:t,once:!0}),r}off(e,t){if(o.has(e)){let r=o.get(e);if(void 0===t)o.delete(e);else if("function"==typeof t)for(let[e,t]of r)t.callback===t&&r.delete(e);else r.delete(t)}}emit(e,t){if(o.has(e)){let r=o.get(e);for(let[e,o]of r)o.callback.call(this,t),o.once&&r.delete(e)}}},i=new DOMParser,y=e=>e instanceof l;class l extends n{constructor(e){super(),e=e instanceof NodeList?[...e]:[e],this.els=e,this.euid=Date.now(),this._remarkIndex()}_remarkIndex(){let e=0;if(this.length)for(;e<this.length;)delete this[e],e++;for(this._remarkLength(),e=0;e<this.length;)this[e]=this.els[e],e++}_remarkLength(){this.length=this.els.length}eq(e){return new l(this.els[e])}find(e){return a(e,this.els[0])}first(){return this.eq(0)}last(){return this.eq(this.length-1)}forEach(){Array.prototype.forEach.apply(this.els,arguments)}map(){Array.prototype.map.apply(this.els,arguments)}some(){Array.prototype.some.apply(this.els,arguments)}errey(){Array.prototype.errey.apply(this.els,arguments)}attr(e,t){if("object"==typeof e)for(var r in e)this.els.forEach((t=>{t.setAttribute(r,e[r])}));else{if(null==t)return this.els[0].getAttribute(e);this.els.forEach((r=>{r.setAttribute(e,t)}))}}css(e,t){if("object"==typeof e)for(var r in e)this.els.forEach((t=>{t.style[r]=e[r]}));else{if(null==t)return this.els[0].style[e];this.els.forEach((r=>{r.style[e]=t}))}}addClass(e){e=e.split(" "),this.els.forEach((t=>{t.classList.add(...e)}))}removeClass(e){e=e.split(" "),this.els.forEach((t=>{t.classList.remove(...e)}))}toggleClass(e){this.els.forEach((t=>{t.classList.toggle(e)}))}append(e){if(!e)return this;let t=e;return y(e)||(t=a(e)),t.forEach((e=>{this.els[0].append(e)})),this}appendTo(e){if(!e)return this;let t=e;return y(e)||(t=a(e)),this.els.forEach((e=>{t[0].append(e)})),this}prepend(e){if(!e)return this;let t=e;y(e)||(t=a(e));let r=this.els[0].firstChild;return t.forEach((e=>{this.els[0].insertBefore(e,r)})),this}prependTo(e){if(!e)return this;let t=e;y(e)||(t=a(e));let r=t[0].firstChild;return this.els.forEach((e=>{t[0].insertBefore(e,r)})),this}after(e){if(!e)return this;let t=e;y(e)||(t=a(e));let r=this.els[0].parentNode;return t.forEach((e=>{r.insertBefore(e,this.els[0].nextSibling)})),this}before(e){if(!e)return this;let t=e;y(e)||(t=a(e));let r=this.els[0].parentNode;return t.forEach((e=>{r.insertBefore(e,this.els[0])})),this}html(e){if(void 0===e)return this.els[0].innerHTML;this.els[0].innerHTML=e}}const a=(e,t)=>{if("string"==typeof e){if(e.startsWith("<")){let t=i.parseFromString(e,"text/html").body.childNodes;return new l(t)}return t=t||document,new l(t.querySelectorAll(e))}return new l(e)},d=a,h=(new DOMParser,e=>{let t,{method:r="GET",url:o,headers:s,data:n,responseType:i,timeout:y}=e;if("GET"!=r&&"POST"!=r)return Promise.reject(new Error("Unkown KeyWord"));let l=new Promise(((e,l)=>{let a=new XMLHttpRequest;t=a,a.open(r,o,!0),y&&(a.timeout=y);for(let e in s)a.setRequestHeader(e,s);i&&(a.responseType=i),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var t=a.status;0===t||t>=200&&t<400?e(a.response):l(t)}},a.send(n)}));return l.xhr=t,l.abort=()=>{t.abort()},l}),p=(e,t="text")=>h({method:"GET",url:e,responseType:t}),k=(e,t,r="text")=>h({method:"POST",url:e,data:t,responseType:r}),f=(e,t)=>h({method:t?"POST":"GET",url:e,data:t,responseType:"document"}),u=(e,t)=>h({method:t?"POST":"GET",url:e,data:t,responseType:"document"}),c=(e,t)=>h({method:t?"POST":"GET",url:e,data:t,responseType:"json"}),m=(e,t)=>h({method:t?"POST":"GET",url:e,data:t,responseType:"blob"}),C=(e,t)=>h({method:t?"POST":"GET",url:e,data:t,responseType:"arrayBuffer"}),E=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","ESC","TAB","UP","DOWN","LEFT","RIGHT","DELETE","SHIFT","CTRL","ALT"],T=[{key:"A",keyCode:65},{key:"B",keyCode:66},{key:"C",keyCode:67},{key:"D",keyCode:68},{key:"E",keyCode:69},{key:"F",keyCode:70},{key:"G",keyCode:71},{key:"H",keyCode:72},{key:"I",keyCode:73},{key:"J",keyCode:74},{key:"K",keyCode:75},{key:"L",keyCode:76},{key:"M",keyCode:77},{key:"N",keyCode:78},{key:"O",keyCode:79},{key:"P",keyCode:80},{key:"Q",keyCode:81},{key:"R",keyCode:82},{key:"S",keyCode:83},{key:"T",keyCode:84},{key:"U",keyCode:85},{key:"V",keyCode:86},{key:"W",keyCode:87},{key:"X",keyCode:88},{key:"Y",keyCode:89},{key:"Z",keyCode:90},{key:"0",keyCode:48},{key:"1",keyCode:49},{key:"2",keyCode:50},{key:"3",keyCode:51},{key:"4",keyCode:52},{key:"5",keyCode:53},{key:"6",keyCode:54},{key:"7",keyCode:55},{key:"8",keyCode:56},{key:"9",keyCode:57},{key:"ESC",keyCode:27},{key:"UP",keyCode:38},{key:"DOWN",keyCode:40},{key:"LEFT",keyCode:37},{key:"RIGHT",keyCode:39},{key:"DELETE",keyCode:46},{key:"TAB",keyCode:9}];let b=new Object;((e,t)=>{for(let r in t)e[r]=t[r]})(b,r),((e,t)=>{for(let r in t)e.__proto__[r]=t[r]})(d,r),b.$=d,b.Event=n,b.KeyEvent=class extends n{constructor(e){super(),"keyup"==e&&"keydown"==e||(e="keyup"),this.initEvent(e)}initEvent(e){document.addEventListener(e,(e=>{const t=e.key.toUpperCase();let r;if(T.some((({key:e})=>e===t&&(r=e,!0))),r){let t=[r];e.altKey&&t.push("ALT"),e.shiftKey&&t.push("SHIFT"),e.ctrlKey&&t.push("CTRL"),t=t.sort().join("+"),super.emit(t,e),super.emit("keyup",{key:t,event:e}),e.preventDefault(),e.stopPropagation()}}))}_checkKeyName(e){return e.split("+").every((e=>-1!=E.indexOf(e)))}_renameKeyName(e){return e.split("+").sort().join("+")}$on(e,t){super.on(e,t)}on(e,t){if(e=e.toLocaleUpperCase(),!this._checkKeyName(e))return new Error("keyName 非法");e=this._renameKeyName(e),super.on(e,t)}$once(e,t){super.once(e,t)}once(e,t){if(e=e.toLocaleUpperCase(),!this._checkKeyName(e))return new Error("keyName 非法");e=this._renameKeyName(e),super.once(e,t)}off(e,t){if(e=e.toLocaleUpperCase(),!this._checkKeyName(e))return new Error("keyName 非法");e=this._renameKeyName(e),super.off(e,t)}emit(e,t){super.emit(e,t)}},window.WebNetIO=b;const g=b;return t})()}));
//# sourceMappingURL=netio.js.map